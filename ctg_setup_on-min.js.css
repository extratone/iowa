/* UI BUILD: Friday, Jan 17 2014 at 11:02:58 AM */
/* MD5: bd7357a847f0506986c93cc4bda51b3e */

function checkCookie(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e){return unescape(r)}}}var ns,ctgp=checkCookie("ctgdbgp"),pageurl=window.location;if(ctgp&&ctgp>0&&ctgp<=4){if(/ctgdbg/.test(pageurl)){}else{if(/\?/.test(pageurl)){pageurl=pageurl+"&ctgdbg="+ctgp}else{pageurl=pageurl+"?ctgdbg="+ctgp}window.location=pageurl}}ns={Register:function(e){var t=false;var n="";var r=e.split(".");for(var i=0;i<r.length;i++){if(n!=""){n+="."}n+=r[i];t=this.Exists(n);if(!t){this.Create(n)}}if(t){throw"Namespace: "+e+" is already defined."}},Create:function(_Src){eval("window."+_Src+" = new Object();")},Exists:function(_Src){eval("var NE = false; try{if("+_Src+"){NE = true;}else{NE = false;}}catch(err){NE=false;}");return NE}};ns.Register("CTG");CTG.Track=function(){return{debug_level:0,pagename:track.catName,set_campaign:0,track_string:"",link_type:"",link_header:"",link_clicked:"",ttype:"CTG",tcampaign:"",setDebug:function(){var e,t,n,r="ctgdbg";r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e="[\\?&]"+r+"=([^&#]*)";t=new RegExp(e);n=t.exec(window.location.href);if(n!==null&&n[1]!=0){this.debug_level=n[1];this.setCTGCookie("ctgdbgp",n[1])}else{this.eraseCTGCookie("ctgdbgp")}},setCTGCookie:function(e,t){var e=e,n=new Date,r=1,t=t;n.setDate(n.getDate()+r);t=escape(t)+(r==null?"":"; expires="+n.toUTCString()+";path=/;domain=.bestbuy.com");document.cookie=e+"="+t},eraseCTGCookie:function(e){this.setCTGCookie(e,"",-1)},setCampaign:function(e){if(e==0){this.set_campaign=0}else{this.set_campaign=1}},setPagename:function(e){this.pagename=e},checkCookie:function(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e){return unescape(r)}}},elementBind:function(e,t,n){if($(t).length!=0){$(e).on("mousedown.ctg",t,n);if(this.debug_level>=1&&this.debug_level<=4){$(e).find(t).css("background","#99FF99")}if(this.debug_level==4){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log("Bind: ID= "+e+" Ele= "+t)}}}},imageLink:function(e){var t,n=$(e).parents("li"),r=0,s="",o="";$(n).find("a").each(function(){if(s==$(this).attr("href")){r++}s=$(this).attr("href")});if(r>=1){t=$(n).find("a").length;for(i=0;i<=t;++i){o=$(n).find("a:eq("+i+")").text();if(o.length>1){this.link_clicked=o}}}else{if($(e).children("img").length>0){this.link_clicked=$(e).children("img").attr("alt")}else{this.link_clicked=$(e).text()}}},appendSegment:function(e,t,n){t=this.trimSpaces(t);return e==null||e.length==0||e==""?t:e+n+t},trimSpaces:function(e){e=e.replace(/(^\s*)|(\s*$)/gi,"");e=e.replace(/[ ]{2,}/gi," ");e=e.replace(/\n /,"\n");return e},buildTString:function(){function e(e){e=e.replace(/[\r\n\t]+/g,"");return e}function t(e){e.replace(/&(lt|gt);/g,"").replace(/<\/?[^>]+(>|$)/g,"");return e}if(this.link_type!=""){this.track_string=this.appendSegment(this.track_string,this.link_type,":")}if(this.link_header!=""){this.track_string=this.appendSegment(this.track_string,this.link_header,":")}if(this.link_clicked!=""){this.track_string=this.appendSegment(this.track_string,this.link_clicked,":")}this.track_string=t(this.track_string);this.track_string=e(this.track_string)},sendTrackingData:function(){this.buildTString();if(this.debug_level==2){if(this.set_campaign==1){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(this.pagename+":"+this.ttype+":"+this.track_string+" campaignv4= "+this.tcampaign)}}else{if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(this.pagename+":"+this.ttype+":"+this.track_string)}}}else{if(this.set_campaign==0){trackEvent.event("event.view",{lastLink:this.pagename+":"+this.ttype+":"+this.track_string,page:this.pagename})}else if(this.set_campaign==1){trackEvent.event("event.view",{lastLink:this.pagename+":"+this.ttype+":"+this.track_string,pageCampaign:this.tcampaign})}}this.link_type="";this.link_header="";this.link_clicked="";this.track_string="";this.tcampaign=""}}};